# 6장. 스트림과 테이블
지금까지는 주로 유한과 무한, 즉 데이터의 기수(cardinality)라는 특성에만 집중해왔으며, 덕분에 내부 동작에 대한 큰 고민 없이 무한 데이터셋 도입으로 겪는 어려움을 살펴봤다. 이제 스트림과 테이블, 즉 구성(consititution)이라는 데이터의 특성이 더해지면 어떤 일이 생기는지 살펴보자.

## 스트림/테이블의 기본: 스트림/테이블의 특수상대론
스트림/테이블에 대한 기본적인 아이디어는 데이터베이스 분야에서 나왔다. 테이블은 데이터를 행과 열로 보관하며, 각 열은 명시적이든 아니든 일정 종류의 키로 구분된다. 데이터베이스의 자료 구조는 추가 전용 로그(append-only log)이며, 트랜잭션이 테이블에 적용될 때 이 트랜잭션은 로그에 기록된다. 그리고 이 로그의 내용이 테이블에 적용되면서 테이블상에 갱신 내용이 구체화된다.

##### 스트림에서 테이블을 만드는 방법?
스트림/테이블에 대응시켜보자면 이 로그는 스트림에 해당한다. 테이블은 스트림에서 보이는 트랜잭션 로그를 적용한 결과라 볼 수 있다.
- 스트림 -> 테이블: 시간에 따른 업데이트 내용을 담은 스트림을 모아 테이블을 생성한다.

##### 테이블에서 스트림은 어떻게 만들어낼 수 있을까?
스트림은 테이블의 변화 로그(changelog)에 해당한다.
> e.g.) 테이블에서 스트림으로의 변환을 설명할 때 쓰이는 예로 구체화 뷰(materialized view)가 있다. 테이블에 쿼리를 적용해 구체화 뷰를 생성하고, 이 구체화 뷰는 데이터베이스 내에서 또 다른 물리 테이블로 생성된다. 구체화 뷰는 해당 쿼리 결과를 캐싱해둔 것으로 볼 수 있으며, 이후 원본 테이블의 내용이 변함에 따라 구체화 뷰 역시 변화한다. 소스 테이블에 변화가 있을 때마다 로그로 남게 되고, 구체화 뷰의 쿼리 문맥 안에서 변화 내용을 구체화 뷰 테이블에 적용한다.
- 테이블 -> 스트림: 시간에 따른 테이블 변화를 관찰해 스트림을 생성한다.

### 스트림/테이블의 일반상대론을 향해서


## 배치 처리 대 스트림/테이블
